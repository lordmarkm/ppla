<h2>Manage Work Order</h2>

{{orderItem}}<br>
wo: {{workOrder}}<br>
attachables: {{attachables}}<br>
trackingNo: {{trackingNo}}

<div ng-if="orderItem.workOrder">
  <dl>
    <dt>Tracking no.
    <dd>{{orderItem.workOrder.trackingNo}}

    <dt>Quantity
    <dd>{{orderItem.workOrder.quantity}}

    <dt>Date created
    <dd>{{orderItem.workOrder.dateCreated}}
    
    <dt>Status
    <dd>{{orderItem.workOrder.status}}
    
    <dt>Attached
    <dd>
      <ul>
        <li ng-repeat="orderItem in attached">
          <a ui-sref="manage/orderitem({id:orderItem.id})">{{orderItem.id}}</a>
        </li>
      </ul>
    </dd>
  </dl>
</div>

<div ng-if="!orderItem.workOrder" class="row">
  <form ng-submit="createNew()" class="form">
    <div class="form-group">
      <label for="workorder-quantity">Product</label>
      <span id="workorder-quantity" class="form-control">{{orderItem.product.name}}</span>
    </div>
    <div class="form-group">
      <label for="workorder-quantity">Quantity</label>
      <input type="number" 
        required
        ng-model="workOrder.quantity" 
        id="workorder-quantity" class="form-control"
        min="1">
    </div>
    <div class="form-group">
      <input type="submit" />
    </div>
  </form>

  <form ng-submit="attach()" class="form">
    <div class="form-group">
      <label>Tracking No.</label>
      <select ng-model="workOrder.trackingNo" 
        ng-options="workOrder.trackingNo as workOrder.trackingNo for workOrder in attachables"
        class="form-control"></select>
    </div>
    <div class="form-group">
      <input type="submit" class="form-control" />
    </div>
  </form>
</div>